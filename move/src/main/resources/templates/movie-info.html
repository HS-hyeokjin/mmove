<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <head th:include="fragments/header :: head"></head>
    <div th:replace="fragments/header :: nav" class="col-md-2"></div>
    <title>Movie Info</title>

</head>
<body>

<div class="container-fluid">
    <div class="row">
        <div th:replace="fragments/sidebar :: nav" class="col-md-2"></div>
        <div class="col-md-10 offset-md-2">
            <br>
            <div class="row">
                <div class="col-md-3">
                    <img th:if="${movieInfoData.movieInfoResult.movieInfo.posterImageUrl != null}" th:src="${movieInfoData.movieInfoResult.movieInfo.posterImageUrl}" alt="Movie Poster" class="img-fluid">
                    <img th:unless="${movieInfoData.movieInfoResult.movieInfo.posterImageUrl != null}" src="/images/no-movie-image.jpg" alt="No Image" class="img-fluid">
                </div>
                <div class="col-md-8" style="position: relative;">
                    <h1 class="mb-4" th:text="${movieInfoData.movieInfoResult.movieInfo.movieNm + ' (' +movieInfoData.movieInfoResult.movieInfo.movieNmEn + ')'}"></h1>
                    <p>
                        <span th:text="${movieInfoData.movieInfoResult.movieInfo.prdtYear + '년 |'}"></span>
                        <span th:text="${movieInfoData.movieInfoResult.movieInfo.typeNm + ' | '}"></span>
                        <span th:text="${movieInfoData.movieInfoResult.movieInfo.showTm + '분 | '}"></span>
                        <span th:each="genre, iterStat : ${movieInfoData.movieInfoResult.movieInfo.genres}"
                              th:text="${genre.genreNm} + ( ${iterStat.last} ? '' : ' | ' )"></span></p>
                    <hr>
                    <p><strong>MovieCode : </strong> <span th:text="${movieInfoData.movieInfoResult.movieInfo.movieCd}"></span></p>
                    <p><strong>개봉일: </strong> <span th:text="${movieInfoData.movieInfoResult.movieInfo.openDt}"></span></p>
                    <p><strong>감독 : </strong> <span th:each="director, iterStat : ${movieInfoData.movieInfoResult.movieInfo.directors}"
                                                    th:text="${director.peopleNm} + ( ${iterStat.last} ? '' : ' | ')"></span>  </p>
                    <p><span th:text="${movieInfoData.movieInfoResult.movieInfo.overview}"></span></p>
                    <div class="progress" style="position: absolute; bottom: 0; width: 100%;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-danger" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%;"></div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div th:each="actor : ${movieInfoData.movieInfoResult.movieInfo.actors}" class="col-md-1 mb-4">
                    <a th:href="@{/person-detail/{actorName}(actorName=${actor.peopleNmEn})}" class="text-decoration-none">
                        <div class="card border-dark">
                            <img th:src="${#strings.isEmpty(actor.peopleImageUrl) ? '/images/no_person_image.jpg' : actor.peopleImageUrl}" class="card-img-top" alt="Actor Image" width="200">
                            <div class="card-body">
                                <h5 class="card-title" th:text="${actor.peopleNm}"></h5>
                                <p class="card-text">
                                    <span th:text="${actor.cast}"></span>
                                </p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:insert="fragments/footer :: footer"></div>
</body>
</html>
